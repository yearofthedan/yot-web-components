{"version":3,"file":"yot-field.js","sources":["../src/yot-field.ts"],"sourcesContent":["import { LitElement, html, customElement, property, css } from 'lit-element';\n\n@customElement('yot-field')\nexport class YotField extends LitElement {\n  static styles = css`\n    :host {\n      position: relative;\n      min-height: var(--field-height);\n      display: inline-block;\n\n      font-size: var(--font-size-s);\n      background-color: var(--palette-background-light);\n    }\n\n    label {\n      position: absolute;\n      left: 0;\n      top: 0;\n    }\n\n    input[type='radio'] + label {\n      position: relative;\n    }\n\n    input[type='checkbox'] + label {\n      position: relative;\n    }\n\n    :host(:not(:focus-within)) > input:placeholder-shown + label {\n      top: 50%;\n      transform: translateY(-50%);\n      left: var(--inset-density-xs);\n    }\n\n    input:not(:focus):placeholder-shown + label {\n      font-size: var(--font-size-s);\n      cursor: text;\n      transition: all ease-out 100ms;\n    }\n\n    label {\n      color: var(--palette-primary-dark);\n      font-size: var(--font-size-xs);\n      transition: all ease-in 100ms;\n      font-family: inherit;\n    }\n\n    input {\n      border: none;\n      border-bottom: solid 1px var(--palette-primary-dark);\n      background-color: var(--palette-background);\n      color: var(--palette-background-on);\n      font-size: var(--font-size-s);\n      padding-top: calc(var(--font-size-xs) + 2 * var(--inset-density-xs));\n    }\n\n    input:focus {\n      outline: none;\n      border-bottom: solid 2px var(--palette-primary-dark);\n    }\n\n    input:not(:focus):placeholder-shown {\n      background-color: var(--palette-background);\n    }\n\n    input::placeholder {\n      opacity: 0;\n      transition: all ease-in 100ms;\n    }\n\n    input:focus::placeholder {\n      opacity: 1;\n      transition: all ease-out 100ms;\n      font-style: italic;\n      font-size: var(--font-size-xs);\n      padding-left: var(--padding-unit);\n    }\n\n    [role='alert'] {\n      display: inline-block;\n      padding: var(--padding-unit);\n      font-size: var(--font-size-xs);\n      color: var(--palette-error);\n    }\n  `;\n\n  @property()\n  value = '';\n\n  @property()\n  type = 'text';\n\n  @property()\n  name = '';\n\n  @property()\n  error?: string;\n\n  @property()\n  label?: string;\n\n  @property()\n  placeholder = ' ';\n\n  @property()\n  id = '';\n\n  hiddenInputRef: HTMLInputElement | null = null;\n\n  setValueToHiddenInput(value: string | null) {\n    if (!this.ownerDocument) {\n      return;\n    }\n\n    if (this.hiddenInputRef === null) {\n      const hiddenInput = this.ownerDocument.createElement('input');\n      hiddenInput.type = 'hidden';\n      this.appendChild(hiddenInput);\n      this.hiddenInputRef = hiddenInput;\n    }\n\n    this.hiddenInputRef.name = this.name;\n    this.hiddenInputRef.value = value ?? '';\n  }\n\n  __inputChanged(e: InputEvent) {\n    this.setValueToHiddenInput((e.target as HTMLInputElement).value);\n  }\n\n  render() {\n    this.setValueToHiddenInput(this.value);\n    return html`\n      <input\n        id=\"input-${this.id}\"\n        name=\"${this.name}\"\n        type=\"${this.type}\"\n        .value=\"${this.value}\"\n        placeholder=\"${this.placeholder}\"\n        @input=\"${this.__inputChanged}\"\n        part=\"input\"\n      />\n      ${this.label\n        ? html`<label for=\"input-${this.id}\">${this.label}</label>`\n        : ''}\n      ${this.error ? html`<aside role=\"alert\">${this.error}</aside>` : ''}\n    `;\n  }\n}\n"],"names":["YotField","LitElement","constructor","this","setValueToHiddenInput","value","ownerDocument","hiddenInputRef","hiddenInput","createElement","type","appendChild","name","__inputChanged","e","target","render","html","id","placeholder","label","error","css","__decorate","property","customElement"],"mappings":"sHAGA,IAAaA,EAAb,cAA8BC,EAA9BC,kCAoFEC,WAAQ,GAGRA,UAAO,OAGPA,UAAO,GASPA,iBAAc,IAGdA,QAAK,GAELA,oBAA0C,KAE1CC,sBAAsBC,GACpB,GAAKF,KAAKG,cAAV,CAIA,GAA4B,OAAxBH,KAAKI,eAAyB,CAChC,MAAMC,EAAcL,KAAKG,cAAcG,cAAc,SACrDD,EAAYE,KAAO,SACnBP,KAAKQ,YAAYH,GACjBL,KAAKI,eAAiBC,EAGxBL,KAAKI,eAAeK,KAAOT,KAAKS,KAChCT,KAAKI,eAAeF,MAAQA,MAAAA,EAAAA,EAAS,IAGvCQ,eAAeC,GACbX,KAAKC,sBAAuBU,EAAEC,OAA4BV,OAG5DW,SAEE,OADAb,KAAKC,sBAAsBD,KAAKE,OACzBY;;oBAAP;gBAAA;gBAAA;kBAAA;uBAAA;kBAAA;;;QAAA;QAAA;OAEgBd,KAAKe,GACTf,KAAKS,KACLT,KAAKO,KACHP,KAAKE,MACAF,KAAKgB,YACVhB,KAAKU,eAGfV,KAAKiB,MACHH,8BADF,MAAA,aAC2Bd,KAAKe,GAAOf,KAAKiB,OAC1C,GACFjB,KAAKkB,MAAQJ,gCAAb,aAAwCd,KAAKkB,OAAkB,MA5I9DrB,SAASsB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAmFhBC,GADCC,iCAIDD,GADCC,gCAIDD,GADCC,gCAIDD,GADCC,iCAIDD,GADCC,iCAIDD,GADCC,uCAIDD,GADCC,8BArGUxB,KADZyB,EAAc,cACFzB"}